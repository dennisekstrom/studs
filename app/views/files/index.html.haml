.column.wide
  %h2= t '.title'

  %table.files
    - cols = %w(name size mtime).map(&:to_sym)
    %thead
      - cols.each do |col|
        %th{ :class => col }= t_attribute(:file, col)
      %th.actions &nbsp;
    %body
      - if @files.empty?
        %tr
          %td.empty{ colspan: cols.size}>= t('files.none')
      - @files.each do |file|
        %tr
          %td.name= file[:name]
          %td.size= number_to_human_size file[:size], precision: 2, significant: false
          %td.mtime{ title: l(file[:mtime]) }= l(file[:mtime], format: :ymd)

- if can? :upload, :file
  .column.small
    %h2= t '.upload'

    = ext_form_for :file, url: files_path, method: :post, multipart: true do |f|
      %fieldset.inline
        = f.file_field_row :file
        = f.text_field_row :name, suggest: @files.map { |f| f[:name] }
        = f.submit t('actions.upload')
